using System;
using System.Collections.Generic;
using System.Net;

namespace Tools.YahooFinance
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            string strSymbols = "011083,011084,011085,011086,011087,011088,011089,001,002,003,004,005,006,007,008,009,010,011,012,013,014,015,016,017,018,019,020,021,022,023,024,025,026,027,028,029,030,031,032,033,034,035,036,037,038,039,040,041,042,043,044,045,046,047,048,050,051,052,053,054,055,056,057,058,059,060,061,062,063,064,065,066,067,068,069,070,071,072,073,074,075,076,077,078,079,080,081,082,083,084,085,086,087,088,089,090,091,092,093,094,095,096,097,098,0099,0100,0101,0102,0103,0104,0105,0106,0107,0108,0109,0110,0111,0112,0113,0114,0115,0116,0117,0118,0119,0120,0121,0122,0123,0124,0125,0126,0127,0128,0129,0130,0131,0132,0133,0134,0135,0136,0137,0138,0139,0141,0142,0143,0144,0145,0146,0147,0148,0149,0151,0152,0154,0155,0156,0157,0158,0159,0160,0161,0162,0163,0164,0165,0166,0167,0168,0169,0170,0171,0172,0173,0174,0175,0176,0177,0178,0179,0180,0181,0182,0183,0184,0185,0186,0187,0188,0189,0190,0191,0193,0194,0195,0196,0197,0198,0199,0200,0201,0202,0204,0205,0206,0207,0208,0209,0210,0211,0212,0213,0214,0215,0216,0217,0218,0219,0220,0221,0222,0223,0224,0225,0226,0227,0228,0229,0230,0231,0232,0233,0234,0235,0236,0237,0238,0239,0240,0241,0242,0243,0244,0245,0246,0247,0248,0249,0250,0251,0252,0253,0254,0255,0256,0257,0258,0259,0260,0261,0262,0263,0264,0265,0266,0267,0268,0269,0270,0271,0272,0273,0274,0275,0276,0277,0278,0279,0280,0281,0282,0283,0284,0285,0286,0287,0288,0289,0290,0291,0292,0293,0294,0295,0296,0297,0298,0299,0300,0302,0303,0304,0305,0306,0307,0308,0309,0310,0311,0312,0313,0315,0316,0317,0318,0319,0320,0321,0322,0323,0325,0326,0327,0328,0329,0330,0331,0332,0333,0334,0335,0336,0337,0338,0339,0340,0341,0342,0343,0345,0346,0347,0348,0350,0351,0352,0353,0354,0355,0356,0357,0358,0359,0360,0361,0362,0363,0364,0365,0366,0367,0368,0369,0370,0371,0372,0373,0374,0375,0376,0377,0378,0379,0380,0381,0382,0383,0384,0385,0386,0387,0388,0389,0390,0391,0392,0393,0395,0396,0397,0398,0399,0402,0403,0404,0405,0406,0408,0410,0411,0412,0413,0417,0418,0419,0420,0421,0422,0423,0425,0426,0428,0430,0431,0432,0433,0435,0438,0439,0440,0444,0445,0448,0449,0450,0451,0455,0456,0458,0459,0460,0462,0464,0465,0467,0468,0469,0471,0472,0474,0475,0476,0477,0479,0480,0482,0483,0485,0486,0487,0488,0489,0491,0493,0494,0495,0496,0497,0498,0499,0500,0502,0503,0505,0506,0508,0509,0510,0511,0512,0513,0515,0516,0517,0518,0519,0521,0522,0524,0525,0526,0527,0528,0529,0530,0531,0532,0533,0535,0536,0538,0539,0540,0542,0543,0544,0546,0547,0548,0549,0550,0551,0552,0553,0554,0555,0556,0557,0558,0559,0560,0563,0565,0566,0567,0568,0569,0570,0571,0572,0573,0575,0576,0577,0578,0580,0581,0582,0583,0585,0587,0588,0589,0590,0591,0592,0593,0595,0596,0597,0598,0599,0600,0601,0602,0603,0604,0605,0606,0607,0608,0609,0610,0611,0612,0613,0616,0617,0618,0619,0620,0621,0622,0623,0625,0626,0627,0628,0629,0630,0631,0632,0633,0635,0636,0637,0638,0639,0640,0641,0642,0643,0645,0646,0647,0648,0650,0651,0653,0655,0656,0657,0658,0659,0660,0661,0662,0663,0664,0665,0666,0667,0668,0669,0670,0672,0673,0674,0675,0676,0677,0678,0679,0680,0681,0682,0683,0684,0685,0686,0687,0688,0689,0690,0691,0692,0693,0694,0696,0697,0698,0700,0701,0702,0703,0704,0705,0706,0707,0708,0709,0710,0711,0712,0713,0715,0716,0717,0718,0719,0720,0721,0723,0724,0725,0726,0727,0728,0729,0730,0731,0732,0733,0735,0736,0737,0738,0739,0743,0745,0746,0747,0750,0751,0752,0753,0754,0755,0756,0757,0758,0759,0760,0761,0762,0763,0764,0765,0766,0767,0768,0769,0771,0773,0775,0776,0777,0778,0789,0794,0800,0801,0802,0803,0805,0806,0808,0809,0810,0811,0812,0813,0814,0817,0818,0819,0820,0821,0822,0823,0824,0825,0826,0827,0828,0829,0830,0831,0832,0833,0834,0835,0836,0837,0838,0839,0840,0841,0842,0845,0846,0847,0848,0850,0851,0852,0853,0855,0856,0857,0858,0859,0860,0861,0862,0865,0866,0867,0868,0869,0870,0871,0872,0873,0874,0875,0876,0877,0878,0880,0881,0882,0883,0885,0886,0887,0888,0889,0891,0893,0894,0895,0896,0897,0898,0899,0900,0901,0902,0903,0904,0905,0906,0907,0908,0909,0910,0912,0913,0914,0915,0916,0917,0918,0919,0921,0922,0923,0925,0926,0927,0928,0929,0930,0931,0932,0933,0934,0935,0936,0938,0939,0940,0941,010008,010012,010013,010022,010023,010026,010049,010071,010072,010074,010076,010078,010082,010084,010088,010091,010092,010094,010095,010098,010099,010100,010101,010102,010103,010105,010107,010108,010109,010110,010111,010112,010113,010114,010115,010116,010117,010118,010119,010120,010121,010122,010123,010124,010125,010126,010127,010128,010129,010130,010131,010132,010133,010134,010135,010136,010137,010138,010139,010140,010800,010801,010802,010803,010828,010829,010989,011002,011003,011005,011007,011009,011016,011017,011021,011022,011026,011028,011029,011031,011038,011039,011041,011042,011043,011045,011051,011052,011053,011068,011069,011071,011072";
            strSymbols += "1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,141,142,143,144,145,146,147,148,149,151,152,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,193,194,195,196,197,198,199,200,201,202,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,302,303,304,305,306,307,308,309,310,311,312,313,315,316,317,318,319,320,321,322,323,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,345,346,347,348,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,395,396,397,398,399,402,403,404,405,406,408,410,411,412,413,417,418,419,420,421,422,423,425,426,428,430,431,432,433,435,438,439,440,444,445,448,449,450,451,455,456,458,459,460,462,464,465,467,468,469,471,472,474,475,476,477,479,480,482,483,485,486,487,488,489,491,493,494,495,496,497,498,499,500,502,503,505,506,508,509,510,511,512,513,515,516,517,518,519,521,522,524,525,526,527,528,529,530,531,532,533,535,536,538,539,540,542,543,544,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,563,565,566,567,568,569,570,571,572,573,575,576,577,578,580,581,582,583,585,587,588,589,590,591,592,593,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,616,617,618,619,620,621,622,623,625,626,627,628,629,630,631,632,633,635,636,637,638,639,640,641,642,643,645,646,647,648,650,651,653,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,696,697,698,700,701,702,703,704,705,706,707,708,709,710,711,712,713,715,716,717,718,719,720,721,723,724,725,726,727,728,729,730,731,732,733,735,736,737,738,739,743,745,746,747,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,771,773,775,776,777,778,789,794,800,801,802,803,805,806,808,809,810,811,812,813,814,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,845,846,847,848,850,851,852,853,855,856,857,858,859,860,861,862,865,866,867,868,869,870,871,872,873,874,875,876,877,878,880,881,882,883,885,886,887,888,889,891,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,912,913,914,915,916,917,918,919,921,922,923,925,926,927,928,929,930,931,932,933,934,935,936,938,939,940,941,943,945,946,947,948,950,951,952,953,955,956,957,958,959,960,962,963,965,966,967,968,969,970,971,972,973,975,976,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,995,996,997,998,999,1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1013,1019,1020,1021,1025,1026,1028,1029,1031,1032,1033,1036,1037,1038,1039,1041,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1068,1069,1070,1071,1072,1073,1075,1076,1079,1080,1082,1083,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1104,1105,1106,1108,1109,1110,1111,1112,1114,1115,1116,1117,1118,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1135,1136,1137,1138,1139,1140,1141,1142,1143,1145,1147,1149,1150,1151,1152,1155,1157,1159,1160,1161,1163,1164,1165,1166,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1178,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1191,1192,1193,1194,1195,1196,1198,1199,1200,1201,1202,1203,1205,1206,1207,1208,1211,1212,1213,1215,1217,1218,1220,1221,1222,1223,1224,1225,1226,1227,1228,1229,1230,1231,1234,1235,1236,1238,1241,1257,1259,1265,1278,1280,1282,1288,1299,1308,1313,1318,1323,1328,1333,1338,1361,1368,1378,1380,1382,1383,1386,1387,1388,1393,1398,1399,1428,1488,1513,1518,1555,1600,1603,1606,1618,1623,1628,1633,1638,1663,1666,1668,1682,1683,1685,1688,1698,1700,1708,1717,1728,1733,1766,1768,1777,1788,1798,1800,1808,1812,1813,1818,1822,1823,1828,1831,1833,1836,1838,1863,1866,1868,1878,1880,1881,1882,1883,1886,1888,1889,1893,1898,1899,1900,1910,1913,1918,1919,1928,1938,1966,1968,1988,1991,1997,1998,1999,2000,2002,2005,2006,2007,2008,2009,2010,2011,2018,2020,2028,2038,2083,2088,2098,2099,2118,2123,2128,2168,2188,2198,2208,2218,2222,2228,2233,2238,2266,2268,2272,2282,2288,2299,2300,2302,2307,2308,2309,2310,2312,2313,2314,2317,2318,2319,2320,2322,2323,2324,2326,2327,2328,2330,2331,2333,2336,2337,2338,2339,2340,2341,2342,2343,2345,2348,2349,2355,2356,2357,2358,2362,2366,2368,2369,2371,2378,2379,2380,2382,2383,2388,2389,2398,2468,2488,2511,2541,2581,2593,2600,2601,2607,2618,2626,2628,2662,2668,2678,2688,2689,2698,2700,2722,2727,2728,2777,2778,2788,2789,2800,2801,2802,2803,2806,2809,2810,2812,2813,2814,2815,2816,2817,2818,2819,2820,2823,2825,2826,2827,2828,2829,2831,2833,2835,2836,2837,2838,2839,2840,2841,2844,2846,2848,2866,2868,2877,2878,2880,2882,2883,2888,2889,2898,2899,2911,2926,2927,2938,2944,2947,2949,2950,2951,2952,2953,2954,2955,2956,2957,2958,2960,2961,3000,3001,3002,3004,3005,3006,3007,3009,3010,3011,3015,3017,3019,3020,3022,3024,3025,3027,3032,3033,3035,3036,3039,3043,3046,3048,3049,3050,3051,3052,3057,3061,3062,3063,3071,3073,3077,3081,3083,3087,3088,3300,3303,3308,3311,3318,3322,3323,3328,3330,3331,3332,3333,3335,3336,3337,3339,3344,3355,3360,3363,3366,3368,3377,3378,3382,3383,3389,3393,3398,3399,3618,3683,3688,3777,3788,3800,3808,3813,3818,3823,3828,3833,3838,3868,3883,3886,3888,3889,3898,3899,3900,3918,3928,3933,3938,3968,3983,3988,3989,3993,3998,3999,4089,4170,4208,4331,4332,4333,4335,4336,4337,4338,4508,5636,6030,6210,6230,6488,6663,6808,6813,6828,6838,6868,8003,8005,8006,8007,8008,8009,8010,8011,8016,8017,8019,8020,8021,8022,8025,8026,8028,8029,8032,8033,8035,8037,8041,8043,8045,8046,8047,8048,8049,8050,8051,8053,8055,8058,8060,8061,8063,8066,8068,8070,8071,8075,8076,8078,8079,8080,8081,8082,8083,8085,8086,8087,8088,8089,8092,8095,8096,8098,8100,8102,8103,8106,8108,8109,8111,8112,8115,8116,8117,8119,8120,8123,8126,8128,8129,8130,8131,8132,8137,8143,8148,8150,8153,8155,8156,8158,8159,8160,8161,8163,8165,8166,8167,8169,8171,8172,8173,8175,8176,8178,8179,8186,8187,8188,8189,8190,8192,8193,8197,8198,8200,8202,8203,8205,8206,8207,8208,8210,8211,8212,8213,8217,8220,8225,8226,8227,8228,8229,8231,8233,8235,8236,8239,8243,8247,8248,8249,8250,8251,8253,8256,8258,8265,8266,8269,8270,8271,8272,8273,8279,8286,8290,8292,8295,8296,8298,8299,8301,8306,8312,8317,8321,8325,8329,8337,8340,8343,8348,8351,8356,8371,8372,8373,8396,8397,8399,8400";

            List<PriceLite> prices = YahooFinanceLite.Parse(strSymbols);
            foreach (PriceLite price in prices)
            {
                Console.WriteLine(price.ToString());
            }

            //string stockData = string.Empty;
            //string url = "http://finance.yahoo.com/d/quotes.csv?s=1470.HK+8271.HK+0003.HK+0001.HK&f=snbaopl1t1lvk1";
            //using (WebClient client = new WebClient())
            //{
            //    client.UseDefaultCredentials = true;
            //    int cnt = 0;
            //    while (cnt <= 2)
            //    {
            //        try
            //        {
            //            if (cnt == 0)
            //            {
            //                WebProxy proxy = new WebProxy("ITD1SG511S", 8085);
            //                proxy.BypassProxyOnLocal = true;
            //                proxy.UseDefaultCredentials = true;
            //                client.Proxy = proxy;
            //            }
            //            else if (cnt == 1)
            //            {
            //                client.Proxy = WebRequest.GetSystemWebProxy();
            //            }
            //            else if (cnt == 2)
            //            {
            //                client.Proxy = WebRequest.DefaultWebProxy;
            //            }

            //            stockData = client.DownloadString(new Uri(url));

            //            if (stockData.Length > 0)
            //                break;
            //        }
            //        catch (Exception ex) { Console.WriteLine(ex.ToString()); }
            //        cnt++;
            //    }
            //}

            //List<Price> prices = YahooFinance.Parse(stockData);

            //foreach (Price price in prices)
            //{
            //    Console.WriteLine(price.ToString());
            //}

            Console.Read();

        }
    }
}